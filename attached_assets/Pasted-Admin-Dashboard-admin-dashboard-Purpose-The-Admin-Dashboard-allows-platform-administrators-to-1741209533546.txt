Admin Dashboard (/admin-dashboard)
ğŸ” Purpose: The Admin Dashboard allows platform administrators to review artist projects, approve milestones, and distribute funds.

ğŸ“Œ Tech Stack:
âœ… Frontend: Next.js + TailwindCSS
âœ… Backend: Node.js + Express.js + PostgreSQL
âœ… Auth: Placeholder for Privy (Future Implementation)
âœ… Blockchain: No on-chain integration yet, but structured for Base L2 with OnchainKit (Future Implementation)

ğŸŸ¥ Admin Dashboard Overview (/admin-dashboard)
ğŸ” Purpose:
âœ… Lists all active artist projects
âœ… Allows admins to select a project for review
âœ… Provides an overview of platform-wide statistics

ğŸ› ï¸ What It Should Show
Admin Welcome Message: "Welcome back, Admin!"
Platform Statistics Panel
Total Active Projects
Total Milestone Approvals Pending
Total Funds Distributed
Project List (Selectable)
Each project card includes:
ğŸµ Project Name
ğŸ‘¤ Artist Name
ğŸ“Š Funding Status ($X of $Y Raised)
ğŸ·ï¸ Status (Funding, In Progress, Ready for Release)
ğŸ”— [Manage] Button (Takes user to /admin-dashboard/[projectId])
ğŸ› ï¸ API Calls
GET /admin/projects â†’ Fetch all active projects.
GET /admin/stats â†’ Fetch platform-wide statistics.
ğŸŸ¥ Project-Specific Admin Dashboard (/admin-dashboard/[projectId])
When an admin selects a project, they should see project-specific details and be able to manage milestones & fund distribution.

ğŸ› ï¸ Sidebar Navigation (Dynamically Generated)
tsx
Copy
Edit
import Link from 'next/link';

export default function AdminSidebar({ projectId }) {
  return (
    <nav className="w-64 bg-black h-screen flex flex-col p-4">
      <h2 className="text-white text-lg font-bold mb-6">Admin Dashboard</h2>
      <Link href={`/admin-dashboard/${projectId}`}>
        <button className="bg-red-500 text-white px-4 py-2 w-full text-left">Project Overview</button>
      </Link>
      <Link href={`/admin-dashboard/${projectId}/milestones`}>
        <button className="text-gray-300 hover:text-white px-4 py-2 w-full text-left">Milestones</button>
      </Link>
      <Link href={`/admin-dashboard/${projectId}/fund-distribution`}>
        <button className="text-gray-300 hover:text-white px-4 py-2 w-full text-left">Fund Distribution</button>
      </Link>
    </nav>
  );
}
âœ… Sidebar now updates links dynamically based on projectId

ğŸŸ¥ 1. Project Overview (/admin-dashboard/[projectId])
ğŸ” Purpose:
âœ… Shows full details of the selected artistâ€™s project
âœ… Provides insights into funding progress & milestones

ğŸ› ï¸ What It Should Show
Project Title & Artist Name
Funding Progress (Raised: $X of $Y)
Status of Current Milestones
Admin Actions
ğŸ”„ Refresh Data
âœ… View Milestone Submissions
ğŸ’° Release Funds
ğŸ› ï¸ API Calls
GET /admin/projects/{projectId} â†’ Fetch project details.
GET /admin/projects/{projectId}/milestones â†’ Fetch milestone statuses.
ğŸŸ¥ 2. Milestone Review & Approvals (/admin-dashboard/[projectId]/milestones)
ğŸ” Purpose:
âœ… Lists all milestones for the selected project
âœ… Allows admins to approve milestone proof submissions
âœ… Updates the milestone status (Pending Approval â†’ Approved)

ğŸ› ï¸ What It Should Show
Milestone List
âœ… Milestone 1: Pre-Production (Approved)
â³ Milestone 2: Recording (Pending Approval)
âŒ Milestone 3: Mixing & Mastering (Locked)
âŒ Milestone 4: Final Release (Locked)
Review Section
View Submitted Proof
âœ… [Approve Milestone]
âŒ [Reject Milestone] (Requires rejection reason)
ğŸ› ï¸ API Calls
GET /admin/projects/{projectId}/milestones â†’ Fetch milestones.
POST /admin/milestones/{milestoneId}/approve â†’ Approve milestone.
POST /admin/milestones/{milestoneId}/reject â†’ Reject milestone.
ğŸŸ¥ 3. Fund Distribution (/admin-dashboard/[projectId]/fund-distribution)
ğŸ” Purpose:
âœ… Allows admins to release funds to artists
âœ… Ensures all milestones are completed before funds are distributed

ğŸ› ï¸ What It Should Show
Fund Balance for Project
Milestone Payout Status
âœ… Milestone 1: $X released
âœ… Milestone 2: $X released
â³ Milestone 3: $X pending approval
Admin Action: [Release Funds]
If milestones are complete â†’ Enable fund release button
If not â†’ Disable and show â€œMilestones must be completed firstâ€
ğŸ› ï¸ API Calls
GET /admin/projects/{projectId}/funds â†’ Fetch available funds.
POST /admin/projects/{projectId}/release-funds â†’ Approve final fund release.
ğŸ› ï¸ Backend API Implementation for Admin Dashboard
âœ… Ensures only authenticated admins can access APIs
âœ… Filters projects by artist_id & projectId for granular control

1ï¸âƒ£ Fetch All Active Projects
javascript
Copy
Edit
app.get('/api/admin/projects', async (req, res) => {
  const projects = await db.project.findMany({
    where: { status: { not: 'released' } } // Only show active projects
  });
  res.json(projects);
});
2ï¸âƒ£ Fetch Specific Project Details
javascript
Copy
Edit
app.get('/api/admin/projects/:id', async (req, res) => {
  const project = await db.project.findUnique({
    where: { id: req.params.id }
  });
  res.json(project);
});
3ï¸âƒ£ Fetch Project Milestones
javascript
Copy
Edit
app.get('/api/admin/projects/:id/milestones', async (req, res) => {
  const milestones = await db.milestone.findMany({
    where: { projectId: req.params.id }
  });
  res.json(milestones);
});
4ï¸âƒ£ Approve Milestone
javascript
Copy
Edit
app.post('/api/admin/milestones/:id/approve', async (req, res) => {
  await db.milestone.update({
    where: { id: req.params.id },
    data: { status: 'unlocked' }
  });
  res.json({ message: 'Milestone approved' });
});
5ï¸âƒ£ Release Funds
javascript
Copy
Edit
app.post('/api/admin/projects/:id/release-funds', async (req, res) => {
  const project = await db.project.findUnique({
    where: { id: req.params.id }
  });

  const milestones = await db.milestone.count({
    where: { projectId: req.params.id, status: 'unlocked' }
  });

  const totalMilestones = await db.milestone.count({
    where: { projectId: req.params.id }
  });

  if (milestones !== totalMilestones) {
    return res.status(400).json({ message: 'All milestones must be completed first' });
  }

  // Logic to release funds
  res.json({ message: 'Funds released to artist' });
});
ğŸŸ¥ Summary of Admin Dashboard
Page	Purpose	Main API Calls
Project Overview	Shows project funding, progress, & status	GET /admin/projects/{projectId}
Milestones	Review & approve artist submissions	GET /admin/projects/{projectId}/milestones, POST /admin/milestones/{id}/approve
Fund Distribution	Allows final fund release	GET /admin/projects/{projectId}/funds, POST /admin/projects/{projectId}/release-funds
